# Using the Bitcoin Module in Wallet API Core Client

The Bitcoin Module allows you to interact with Bitcoin accounts. You can retrieve addresses (including for WalletConnect getAccountAddresses), the extended public key (xPub), and more.

## Bitcoin Module Overview

Access the Bitcoin module via `walletApiClient.bitcoin`.

### Methods:

#### 1. Get Addresses (getAddresses)

Returns all addresses needed for the account (e.g. for WalletConnect getAccountAddresses). Ledger only supports the "payment" intention; "ordinal" or other intentions return an empty array.

```javascript
walletApiClient.bitcoin.getAddresses(accountId: string, intentions?: ("payment" | "ordinal")[]): Promise<Array<{ address: string; publicKey?: string; path?: string; intention?: string }>>
```

**Parameters**:
- `accountId` (required): The ID of the Bitcoin account.
- `intentions` (optional): Filter by intention; only `"payment"` is supported by Ledger.

**Returns**: A promise that resolves with an array of address entries (address, optional publicKey, path, intention).

[**Required permission**:](https://developers.ledger.com/APIs/wallet-api/appendix/manifest#permissions)
 `bitcoin.getAddresses`

##### Example:

```javascript
const addresses = await walletApiClient.bitcoin.getAddresses(accountId);
// or with intention filter:
const paymentAddresses = await walletApiClient.bitcoin.getAddresses(accountId, ["payment"]);
```

#### 2. Get Extended Public Key (xPub)

Retrieve the extended public key (xPub) of a Bitcoin account. The xPub can be used to derive Bitcoin addresses without exposing the private key.

```javascript
walletApiClient.bitcoin.getXPub(accountId: string): Promise<string>
```

**Parameters**:
- `accountId` (required): The ID of the Bitcoin account for which the xPub is to be retrieved.

**Returns**: A promise that resolves with the xPub as a string.

[**Required permission**:](https://developers.ledger.com/APIs/wallet-api/appendix/manifest#permissions)
 `bitcoin.getXPub`

##### Example:

```javascript
async function getXPub(walletApiClient, accountId) {
  try {
    const xPub = await walletApiClient.bitcoin.getXPub(accountId);
    console.log('Extended Public Key (xPub):', xPub);
  } catch (error) {
    console.error('Error retrieving xPub:', error);
  }
}
```

## Handling Errors

Make sure to handle errors gracefully and provide appropriate feedback to the user. Additionally, always remember to disconnect the `WindowMessageTransport` when you're done interacting with the Ledger Wallet API to free up resources.